# Basics

## Git相关

* 如果将本地fork的仓库切换到远程的某个发版
  * 首先将原始远程仓库添加: `git remote add repo_url`, 可以使用`git remote -v`查看添加详情
  * 接着`git fetch upstream`将远程upstream和tag load到本地
  * 可以使用`git checkout tag`切换到某个特定的tag, 但是目前并没有在任何分支, 所有的修改都会作废
  * 可以使用`git checkout -b new_branch`将这个特定的tag创建成一个新的branch
  * 可以使用`git push -u origin new_branch`将这个分支推送到远程



## UV

定位是: An extremely fast Python package and project manager, written in Rust.

安装方式: `curl -LsSf https://astral.sh/uv/install.sh | sh`

UV的常见用途:

* 安装Python版本

  * uv会自动检测以及安装的Python, 同时可以安装和管理新的Python
    * 默认安装最新的Python, `uv python install`
    * 安装指定版本Python, `uv python install xxx`
    * 查看可用的Python版本, `uv python list`

* 运行Python脚本

  * 原始的Python只需要运行`python xxx.py`即可运行脚本. uv可以添加额外的版本依赖来运行脚本
  * `uv run --python version --with dependencies script.py args`
  * 如果该命令在一个uv project中, 那么如果不需要依赖项目的话可以使用`uv run --no-project example.py`
  * 同样可以结合Python最近的新特性, 声明式依赖
    * `uv init --script example.py --python 3.12`
    * `uv add --script example.py 'requests<3' 'rich'`
    * `uv lock --script example.py`锁住依赖, 禁止修改依赖项
  * 我感觉这里的缺点是会自动下载Python版本
  * **采用自定的Python源**: `uv add --index "https://example.com/simple" --script example.py 'requests<3' 'rich'`

* 工具调用

  * `uvx`会在不安装的情况下调用工具, uv将这些工具放在隔离的环境中
  * `uvx pycowsay hello world`一个简单示例
  * 如果要以特定的版本运行, `command@version`
  * 可以采用`--from`来指定命令来源或者版本
  * 如果经常使用某个工具, 可以采用`uv tool install xxx`进行持久化安装

* 管理项目

  * 依赖在.toml文件中

  * 创建一个新的项目`uv init project`

  * 项目结构

    * uv除了创建目录文件以外, 还会创建一个虚拟环境和`uv.lock`

    * 目录结构

      ```shell
      ├── .venv # 包含的虚拟环境, uv在这里安装依赖项
      │   ├── bin
      │   ├── lib
      │   └── pyvenv.cfg
      ├── .python-version # 默认python的版本
      ├── README.md
      ├── main.py
      ├── pyproject.toml # 项目元数据, 主要是依赖项
      └── uv.lock
      ```

  * 添加依赖项: `uv add xxx`, 指定包, 版本, 来源, 或者`-r`表示从`requirements.txt`文件中进行迁移, `uv lock --upgrade-package xxx`在不改变锁文件结构的情况下更新包

  * 移除的依赖项: `uv remove requests`

  * 运行项目:

    * `uv run`运行任意脚本和命令, 例如对于flask, `uv run -- flask run -p 3000`

    * 或者采用`uv sync`手动更新环境, 然后在执行命令之前激活

      ```shell
      uv sync
      source .venv/bin/activate
      // TO BE DONE
      ```

  * 构建项目: `uv build`, 这里和npm差不多

UV的常见命令:

* `uv venv --python 3.12 --seed`创建带有pip的Python3.12虚拟环境
* `uv pip install -e .`从源码构建当前项目, 所见即所得, package文件链接到当前目录





